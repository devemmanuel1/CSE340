<%# views/inventory/delete-confirm.ejs %>

<% if (title) { %>
  <h1>
    <%= title %>
  </h1>
  <% } else { res.redirect('/') } %>

<%- messages() %>

<div class="notice">
  <p>
    <strong>Warning:</strong> This action is permanent and cannot be undone.
    Please confirm the details below before deleting.
  </p>
</div>

<% if (errors) { const filtered=errors.array().filter(e=> e.msg !== 'Invalid value');
    if (filtered.length) { %>
    <ul class="flash-message notice">
        <% filtered.forEach(error=> { %>
            <li>
                <%= error.msg %>
            </li>
            <% }) %>
    </ul>
<% } } %>

<form id="deleteInventoryForm" action="/inv/delete" method="post">
  <fieldset>
    <div class="form-group">
      <label for="inv_make">Make</label>
      <input
        type="text"
        id="inv_make"
        name="inv_make"
        readonly
        value="<%= locals.inv_make || '' %>"
      >
    </div>
    <div class="form-group">
      <label for="inv_model">Model</label>
      <input
        type="text"
        id="inv_model"
        name="inv_model"
        readonly
        value="<%= locals.inv_model || '' %>"
      >
    </div>
    <div class="form-group">
      <label for="inv_year">Year</label>
      <input
        type="number"
        id="inv_year"
        name="inv_year"
        readonly
        value="<%= locals.inv_year || '' %>"
      >
    </div>
    <div class="form-group">
      <label for="inv_price">Price</label>
      <input
        type="number"
        id="inv_price"
        name="inv_price"
        readonly
        value="<%= locals.inv_price || '' %>"
      >
    </div>

    <%# The button text is changed to "Delete" and is a different color %>
    <button type="submit" class="form-button delete-button">
      Delete Vehicle
    </button>

    <%# IMPORTANT: The hidden inv_id field must be present %>
    <input type="hidden" name="inv_id" <% if(locals.inv_id) { %> value="<%= locals.inv_id %>"
<% } %>>
  </fieldset>
</form>